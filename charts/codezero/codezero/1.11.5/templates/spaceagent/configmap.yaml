# configmap for domain forwarding
# to set domains use json:
# data:
#   domains: |
#     - "example.com"
#     - "example2.com"
#

{{- define "codezero.domainForwardingData" -}}
{{- $existingConfigMap := lookup "v1" "ConfigMap" .Release.Namespace "domain-forwarding" -}}
{{- if $existingConfigMap -}}
domains: {{ toYaml  $existingConfigMap.data.domains | indent 2 }}
{{- else -}}
domains: "[]"
{{- end -}}
{{- end -}}

---
apiVersion: v1  
kind: ConfigMap
metadata:
  name: domain-forwarding
data:
  {{ include "codezero.domainForwardingData" . }}
